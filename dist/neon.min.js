/* neon-js 1.1.2 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.neon=t()}}(function(){return function t(e,n,i){function s(o,u){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return s(n?n:t)},f,f.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,n){"use strict";function i(){this.key=0,this.value=null,this.add=function(t,e){return null===this.value&&(this.value=new r),this.value.add(t,e)}}function s(t){"undefined"==typeof t&&(t=s.MAP),this.tokens=[],this.pos=0,this.input="",this.decode=function(e){if("string"!=typeof e)throw"Argument must be a string, "+typeof e+" given.";"ï»¿"==e.substr(0,3)&&(e=e.substr(3)),this.input="\n"+e.replace(/\r\n/g,"\n");var n=new RegExp("("+s.patterns.join(")|(")+")","mig");this.tokens=this.split(n,this.input);var u=this.tokens[this.tokens.length-1];this.tokens&&!n.test(u[0])&&(this.pos=this.tokens.length-1,this.error()),this.pos=0;for(var a=this.parse(null);this.tokens[this.pos];)"\n"===this.tokens[this.pos][0][0]?this.pos++:this.error();var h=function(e){if(e instanceof i)return h(e.value);if(e instanceof o)e.attributes=h(e.attributes),e.value=h(e.value);else if(e instanceof r){if(t===s.FORCE_OBJECT){var n={};return e.forEach(function(t,e){n[t]=h(e)}),n}var u=new r,a=!0,f=0;return e.forEach(function(t,e){u.set(t,h(e)),t!==f++&&(a=!1)}),t===s.MAP?u:a?u.values():u.toObject()}return e};return h(a)},this.parse=function(t,e,n,u){"undefined"==typeof n&&(n=null),"undefined"==typeof e&&(e=null),"undefined"==typeof u&&(u=!1);var a=new i;a.value=e;for(var h=t===!1,f=null,l=!1,d=this.tokens,p=d.length,c=a;this.pos<p;this.pos++){var v=d[this.pos][0];if(","===v)(u||l)&&h||this.error(),this.addValue(a,u?n:null,l?f:null),u=l=!1;else if(":"===v||"="===v)if(l&&"object"==typeof f)this.error("Unacceptable key");else if(u&&null==n&&l&&!h){this.pos++,this.addValue(a,null,this.parse(t+"  ",new r,f,!0));var y="undefined"!=typeof d[this.pos]&&"undefined"!=typeof d[this.pos+1]?d[this.pos][0].substr(1):"";if(y.length>t.length)this.pos++,this.error("Bad indentation");else if(y.length<t.length)return c;u=l=!1}else u||!l?this.error():(n=f,u=!0,l=!1,a=c);else if("-"===v)(u||l||h)&&this.error(),n=null,u=!0;else if(s.brackets[v])l?("("!==v&&this.error(),this.pos++,f instanceof o&&f.value===s.CHAIN?f.attributes.value.last().value.attributes=this.parse(!1,new r):f=new o(f,this.parse(!1,new r))):(this.pos++,f=this.parse(!1,new r)),l=!0,(void 0===d[this.pos]||d[this.pos][0]!==s.brackets[v])&&this.error();else{if("]"===v||"}"===v||")"===v){h||this.error();break}if("\n"===v[0])if(h)(u||l)&&(this.addValue(a,u?n:null,l?f:null),u=l=!1);else{for(;void 0!==d[this.pos+1]&&"\n"===d[this.pos+1][0][0];)this.pos++;if(void 0===d[this.pos+1])break;y=d[this.pos][0].substr(1),null===t&&(t=y);var g=Math.min(y.length,t.length);if(g&&y.substr(0,g)!==t.substr(0,g)&&(this.pos++,this.error("Invalid combination of tabs and spaces")),y.length>t.length)(l||!u)&&(this.pos++,this.error("Bad indentation")),this.addValue(a,n,this.parse(y,new r)),y=void 0!==d[this.pos]&&void 0!==d[this.pos+1]?d[this.pos][0].substr(1):"",y.length>t.length&&(this.pos++,this.error("Bad indentation")),u=!1;else{if(l&&!u)break;u&&(this.addValue(a,n,l?f:null),null===n||l||y!==t||"undefined"==typeof d[this.pos+1]||"-"!==d[this.pos+1][0]||(a.value.set(n,new i),a=a.value.get(n)),u=l=!1)}if(y.length<t.length)return c}else if(l)if(f instanceof o){if(f.value!==s.CHAIN){var m=new i;m.add(null,f),f=new o(s.CHAIN,m)}f.attributes.add(null,new o(v))}else this.error();else{if("undefined"==typeof this.parse.consts&&(this.parse.consts={"true":!0,True:!0,TRUE:!0,yes:!0,Yes:!0,YES:!0,on:!0,On:!0,ON:!0,"false":!1,False:!1,FALSE:!1,no:!1,No:!1,NO:!1,off:!1,Off:!1,OFF:!1,"null":0,Null:0,NULL:0}),'"'===v[0]){var x=this;f=v.substr(1,v.length-2).replace(/\\(?:u[0-9a-f]{4}|x[0-9a-f]{2}|.)/gi,function(t){var e={t:"	",n:"\n",r:"\r",f:"\f",b:"\b",'"':'"',"\\":"\\","/":"/",_:"Â "};return void 0!==e[t[1]]?e[t[1]]:"u"===t[1]&&6===t.length?String.fromCharCode(parseInt(t.substr(2),16)):"x"===t[1]&&4===t.length?String.fromCharCode(parseInt(t.substr(2),16)):void x.error("Invalid escaping sequence "+t)})}else f="'"===v[0]?v.substr(1,v.length-2):"undefined"!=typeof this.parse.consts[v]&&("undefined"==typeof d[this.pos+1]||"undefined"!=typeof d[this.pos+1]&&":"!==d[this.pos+1][0]&&"="!==d[this.pos+1][0])?0===this.parse.consts[v]?null:this.parse.consts[v]:isNaN(v)?v.match(/^\d\d\d\d-\d\d?-\d\d?(?:(?:[Tt]| +)\d\d?:\d\d:\d\d(?:\.\d*)? *(?:Z|[-+]\d\d?(?::\d\d)?)?)?$/)?new Date(v):v:1*v;l=!0}}}if(h)(u||l)&&this.addValue(a,u?n:null,l?f:null);else if(l&&!u){if(null===a.value||a.value instanceof r&&0==a.value.length)return f;this.error()}else u&&this.addValue(a,n,l?f:null);return c},this.addValue=function(t,e,n){t.add(e,n)===!1&&this.error("Duplicated key '"+e+"'")},this.error=function(t){"undefined"==typeof t&&(t="Unexpected '%s'");var e=void 0!==this.tokens[this.pos]?this.tokens[this.pos]:null,n=e?e[1]:this.input.length,i=this.input.substr(0,n),s=i.split("\n").length-1,r=n-("\n"+i).lastIndexOf("\n")+1,o=e?e[0].substr(0,40).replace("\n","<new line>"):"end";throw new u(t.replace("%s",o),s,r)},this.split=function(t,e){for(var n,i=[],s=0,r=0,o=function(t,e){t.length&&(t=[t,e],i.push(t))};n=t.exec(e);){o(e.slice(s,n.index),s),s=n.index+n[0].length;var u=Array.prototype.slice.call(n);for(r=1;r<u.length;r++)void 0!==n[r]&&o(n[r],n.index+n[0].indexOf(n[r]))}return o(e.slice(s,e.length),s),i}}var r=t("./map"),o=t("./entity"),u=t("./error");s.patterns=["'[^'\\n]*'|\"(?:\\\\.|[^\"\\\\\\n])*\"","(?:[^\\x00-\\x20#\"',:=[\\]{}()!`-]|[:-][^\"',\\]})\\s])(?:[^\\x00-\\x20,:=\\]})(]+|:(?![\\s,\\]})]|$)|[\\ \\t]+[^\\x00-\\x20#,:=\\]})(])*","[,:=[\\]{}()-]","?:\\#.*","\\n[\\t\\ ]*","?:[\\t\\ ]+"],s.brackets={"[":"]","{":"}","(":")"},s.CHAIN="!!chain",s.MAP="map",s.AUTO="auto",s.FORCE_OBJECT="object",e.exports=s},{"./entity":4,"./error":5,"./map":6}],2:[function(t,e,n){"use strict";function i(t){if(t instanceof Date)return"(date) "+t.toJSON();if(t instanceof r){var e="";return null!==t.attributes&&"object"==typeof t.attributes&&(e=i(t.attributes)),"(entity)\n	name: "+i(t.value)+"\n	attributes: "+(-1===e.indexOf("\n")?""+e:e.replace(/\n/g,"\n	"))}if(t instanceof s){var n="array ("+t.length+")\n";return t.forEach(function(t,e){var s=i(e);n+="	"+(i(t)+" => ")+(-1===s.indexOf("\n")?""+s:s.replace(/\n/g,"\n	"))+"\n"}),n.trim()+"\n"}return"string"==typeof t&&isNaN(t)&&!t.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i)&&new RegExp("^"+o.patterns[1]+"$").exec(t)?'"'+t+'" ('+t.length+")":JSON.stringify(t)}var s=t("./map"),r=t("./entity"),o=t("./decoder");e.exports.toText=i},{"./decoder":1,"./entity":4,"./map":6}],3:[function(t,e,n){"use strict";function i(){this.encode=function(t,e){if("undefined"==typeof e&&(e=null),t instanceof Date)return t.format("Y-m-d H:i:s O");if(t instanceof s){var n="";return null!==t.attributes&&"object"==typeof t.attributes&&(n=this.encode(t.attributes),n=n.substr(1,n.length-2)),this.encode(t.value)+"("+n+")"}if(null!==t&&"object"==typeof t){var r=t instanceof o,u=t instanceof Array&&function(t){var e=0;for(var n in t)e++;return e===t.length}(t)||r&&t.isList(),a="";if(t=r?t.items():t,function(t){for(var e in t)return!1;return!0}(t))return"[]";for(var h in t){if(r)var f=t[h].key,l=t[h].value;else var f=t instanceof Array?parseInt(h):h,l=t[h];e&i.BLOCK?(l=this.encode(l,i.BLOCK),a+=(u?"-":this.encode(f)+":")+""+(-1===l.indexOf("\n")?" "+l:"\n	"+l.replace(/\n/g,"\n	"))+"\n"):a+=(u?"":this.encode(f)+": ")+""+this.encode(l)+", "}return e&i.BLOCK?a.trim().replace(/^\s*\n/gm,"")+"\n":(u?"[":"{")+""+a.substr(0,a.length-2)+(u?"]":"}")}return this.isLiteral(t)?t:JSON.stringify(t)},this.isLiteral=function(t){if("string"!=typeof t||!isNaN(t))return!1;if(t.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i))return!1;var e=new RegExp("^"+r.patterns[1]).exec(t);return e&&e[0].length===t.length}}var s=t("./entity"),r=t("./decoder"),o=t("./map");i.BLOCK=1,e.exports=i},{"./decoder":1,"./entity":4,"./map":6}],4:[function(t,e,n){"use strict";e.exports=function(t,e){this.value=null,this.attributes=null,"undefined"==typeof t&&(t=null),"undefined"==typeof e&&(e=null),this.value=t,this.attributes=e}},{}],5:[function(t,e,n){"use strict";function i(t,e,n){this.name=this.constructor.name,this.message=t+" on line "+e+", column "+n+".",this.line=e,this.column=n,this.constructor.prototype.__proto__=Error.prototype,"undefined"!=typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}e.exports=i},{}],6:[function(t,e,n){"use strict";function i(){this._items=[],this._indexes={},this._key=0,this.length=0,this.set=function(t,e,n){if("undefined"==typeof n&&(n=!0),null===t)t=this._key++;else{var i=parseInt(1*t);!isNaN(i)&&i>=this._key&&(this._key=i+1)}return"undefined"==typeof this._indexes[t]?(this._items[this.length]={key:t,value:e},this._indexes[t]=this.length,this.length++,1):n?(this._items[this._indexes[t]].value=e,0):-1},this.add=function(t,e){return 1===this.set(t,e,!1)},this.get=function(t){if(!this.has(t))throw new Error("Item with key "+t+" not exists");return this._items[this._indexes[t]].value},this.last=function(){if(0===this.length)throw new Error("Map has no items");return this._items[this.length-1]},this.has=function(t){return"undefined"!=typeof this._indexes[t]},this.remove=function(t){if(!this.has(t))throw new Error("Item with key "+t+" not exists");delete this._items[this._indexes[t]],delete this._indexes[t],this.length--},this.items=function(){return this._items},this.keys=function(){var t=[];for(var e in this._items)t.push(this._items[e].key);return t},this.values=function(){var t=[];for(var e in this._items)t.push(this._items[e].value);return t},this.toObject=function(t){"undefined"==typeof t&&(t=!1);var e={};for(var n in this._items){var s=this._items[n].value;e[this._items[n].key]=s instanceof i&&t?s.toObject(!0):s}return e},this.forEach=function(t){for(var e in this._items)t(this._items[e].key,this._items[e].value)},this.isList=function(){return function(t){var e=0;for(var n in t){if(e!==t[n].key)return!1;e=t[n].key+1}return!0}(this.items())}}i.fromObject=function(t){var e=new i;for(var n in t)e.set(n,t[n]);return e},i.fromArray=function(t){var e=new i;for(var n in t)e.set(null,t[n]);return e},e.exports=i},{}],"neon-js":[function(t,e,n){"use strict";var i=t("./encoder"),s=t("./decoder"),r=function(t,e){"undefined"==typeof e&&(e=null);var n=new i;return n.encode(t,e)};e.exports.encode=r,e.exports.decode=function(t,e){"undefined"==typeof e&&(e=s.MAP);var n=new s(e);return n.decode(t)},e.exports.Entity=t("./entity"),e.exports.Map=t("./map"),e.exports.CHAIN=s.CHAIN,e.exports.OUTPUT_MAP=s.MAP,e.exports.OUTPUT_OBJECT=s.FORCE_OBJECT,e.exports.OUTPUT_AUTO=s.AUTO,e.exports.BLOCK=i.BLOCK,e.exports.Dumper=t("./dumper"),e.exports.Error=t("./error")},{"./decoder":1,"./dumper":2,"./encoder":3,"./entity":4,"./error":5,"./map":6}]},{},[])("neon-js")});
