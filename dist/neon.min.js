/* neon-js 1.0.0 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.neon=t()}}(function(){return function t(e,n,s){function i(o,u){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,t,e,n,s)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(t,e){"use strict";function n(){this.key=0,this.value=null,this.add=function(t,e){return null===this.value&&(this.value=new i),this.value.add(t,e)}}function s(){this.tokens=[],this.pos=0,this.input="",this.decode=function(t){if("string"!=typeof t)throw"Argument must be a string, "+typeof t+" given.";"ï»¿"==t.substr(0,3)&&(t=t.substr(3)),this.input="\n"+t.replace("\r","");var e=new RegExp("("+s.patterns.join(")|(")+")","mig");this.tokens=this.split(e,this.input);var o=this.tokens[this.tokens.length-1];this.tokens&&!e.test(o[0])&&(this.pos=this.tokens.length-1,this.error()),this.pos=0;for(var u=this.parse(null);this.tokens[this.pos];)"\n"===this.tokens[this.pos][0][0]?this.pos++:this.error();var a=function(t){if(t instanceof n)return a(t.value);if(t instanceof r)t.attributes=a(t.attributes),t.value=a(t.value);else if(t instanceof i){var e=new i;return t.forEach(function(t,n){e.set(t,a(n))}),e}return t};return a(u)},this.parse=function(t,e,o,u){"undefined"==typeof o&&(o=null),"undefined"==typeof e&&(e=null),"undefined"==typeof u&&(u=!1);var a=new n;a.value=e;for(var h=t===!1,f=null,l=!1,d=this.tokens,p=d.length,c=a;this.pos<p;this.pos++){var v=d[this.pos][0];if(","===v)(u||l)&&h||this.error(),this.addValue(a,u?o:null,l?f:null),u=l=!1;else if(":"===v||"="===v)if(l&&"object"==typeof f)this.error("Unacceptable key");else if(u&&null==o&&l&&!h){this.pos++,this.addValue(a,null,this.parse(t+"  ",new i,f,!0));var y="undefined"!=typeof d[this.pos]&&"undefined"!=typeof d[this.pos+1]?d[this.pos][0].substr(1):"";if(y.length>t.length)this.pos++,this.error("Bad indentation");else if(y.length<t.length)return c;u=l=!1}else u||!l?this.error():(o=f,u=!0,l=!1,a=c);else if("-"===v)(u||l||h)&&this.error(),o=null,u=!0;else if(s.brackets[v])l?("("!==v&&this.error(),this.pos++,f instanceof r&&f.value===s.CHAIN?f.attributes.value.last().value.attributes=this.parse(!1,new i):f=new r(f,this.parse(!1,new i))):(this.pos++,f=this.parse(!1,new i)),l=!0,(void 0===d[this.pos]||d[this.pos][0]!==s.brackets[v])&&this.error();else{if("]"===v||"}"===v||")"===v){h||this.error();break}if("\n"===v[0])if(h)(u||l)&&(this.addValue(a,u?o:null,l?f:null),u=l=!1);else{for(;void 0!==d[this.pos+1]&&"\n"===d[this.pos+1][0][0];)this.pos++;if(void 0===d[this.pos+1])break;y=d[this.pos][0].substr(1),null===t&&(t=y);var g=Math.min(y.length,t.length);if(g&&y.substr(0,g)!==t.substr(0,g)&&(this.pos++,this.error("Invalid combination of tabs and spaces")),y.length>t.length)(l||!u)&&(this.pos++,this.error("Bad indentation")),this.addValue(a,o,this.parse(y,new i)),y=void 0!==d[this.pos]&&void 0!==d[this.pos+1]?d[this.pos][0].substr(1):"",y.length>t.length&&(this.pos++,this.error("Bad indentation")),u=!1;else{if(l&&!u)break;u&&(this.addValue(a,o,l?f:null),null===o||l||y!==t||"undefined"==typeof d[this.pos+1]||"-"!==d[this.pos+1][0]||(a.value.set(o,new n),a=a.value.get(o)),u=l=!1)}if(y.length<t.length)return c}else if(l)if(f instanceof r){if(f.value!==s.CHAIN){var m=new n;m.add(null,f),f=new r(s.CHAIN,m)}f.attributes.add(null,new r(v))}else this.error();else{if("undefined"==typeof this.parse.consts&&(this.parse.consts={"true":!0,True:!0,TRUE:!0,yes:!0,Yes:!0,YES:!0,on:!0,On:!0,ON:!0,"false":!1,False:!1,FALSE:!1,no:!1,No:!1,NO:!1,off:!1,Off:!1,OFF:!1,"null":0,Null:0,NULL:0}),'"'===v[0]){var x=this;f=v.substr(1,v.length-2).replace(/\\(?:u[0-9a-f]{4}|x[0-9a-f]{2}|.)/i,function(t){var e={t:"	",n:"\n",r:"\r",f:"\f",b:"\b",'"':'"',"\\":"\\","/":"/",_:"Â "};return void 0!==e[t[1]]?e[t[1]]:"u"===t[1]&&6===t.length?String.fromCharCode(parseInt(t.substr(2),16)):"x"===t[1]&&4===t.length?String.fromCharCode(parseInt(t.substr(2),16)):void x.error("Invalid escaping sequence "+t)})}else f="'"===v[0]?v.substr(1,v.length-2):"undefined"!=typeof this.parse.consts[v]&&("undefined"==typeof d[this.pos+1]||"undefined"!=typeof d[this.pos+1]&&":"!==d[this.pos+1][0]&&"="!==d[this.pos+1][0])?0===this.parse.consts[v]?null:this.parse.consts[v]:isNaN(v)?v.match(/^\d\d\d\d-\d\d?-\d\d?(?:(?:[Tt]| +)\d\d?:\d\d:\d\d(?:\.\d*)? *(?:Z|[-+]\d\d?(?::\d\d)?)?)?$/)?new Date(v):v:1*v;l=!0}}}if(h)(u||l)&&this.addValue(a,u?o:null,l?f:null);else if(l&&!u){if(null===a.value||a.value instanceof i&&0==a.value.length)return f;this.error()}else u&&this.addValue(a,o,l?f:null);return c},this.addValue=function(t,e,n){t.add(e,n)===!1&&this.error("Duplicated key '"+e+"'")},this.error=function(t){"undefined"==typeof t&&(t="Unexpected '%s'");var e=void 0!==this.tokens[this.pos]?this.tokens[this.pos]:null,n=e?e[1]:this.input.length,s=this.input.substr(0,n),i=s.split("\n").length-1,r=n-("\n"+s).lastIndexOf("\n")+1,u=e?e[0].substr(0,40).replace("\n","<new line>"):"end";throw new o(t.replace("%s",u),i,r)},this.split=function(t,e){for(var n,s=[],i=0,r=0,o=function(t,e){t.length&&(t=[t,e],s.push(t))};n=t.exec(e);){o(e.slice(i,n.index),i),i=n.index+n[0].length;var u=Array.prototype.slice.call(n);for(r=1;r<u.length;r++)void 0!==n[r]&&o(n[r],n.index+n[0].indexOf(n[r]))}return o(e.slice(i,e.length),i),s}}var i=t("./map"),r=t("./entity"),o=t("./error");s.patterns=["'[^'\\n]*'|\"(?:\\\\.|[^\"\\\\\\n])*\"","(?:[^\\x00-\\x20#\"',:=[\\]{}()!`-]|[:-][^\"',\\]})\\s])(?:[^\\x00-\\x20,:=\\]})(]+|:(?![\\s,\\]})]|$)|[\\ \\t]+[^\\x00-\\x20#,:=\\]})(])*","[,:=[\\]{}()-]","?:\\#.*","\\n[\\t\\ ]*","?:[\\t\\ ]+"],s.brackets={"[":"]","{":"}","(":")"},s.CHAIN="!!chain",e.exports=s},{"./entity":4,"./error":5,"./map":6}],2:[function(t,e){"use strict";function n(t){if(t instanceof Date)return"(date) "+t.toJSON();if(t instanceof i){var e="";return null!==t.attributes&&"object"==typeof t.attributes&&(e=n(t.attributes)),"(entity)\n	name: "+n(t.value)+"\n	attributes: "+(-1===e.indexOf("\n")?""+e:e.replace(/\n/g,"\n	"))}if(t instanceof s){var o="array ("+t.length+")\n";return t.forEach(function(t,e){var s=n(e);o+="	"+(n(t)+" => ")+(-1===s.indexOf("\n")?""+s:s.replace(/\n/g,"\n	"))+"\n"}),o.trim()+"\n"}return"string"==typeof t&&isNaN(t)&&!t.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i)&&new RegExp("^"+r.patterns[1]+"$").exec(t)?'"'+t+'" ('+t.length+")":JSON.stringify(t)}var s=t("./map"),i=t("./entity"),r=t("./decoder");e.exports.toText=n},{"./decoder":1,"./entity":4,"./map":6}],3:[function(t,e){"use strict";function n(){this.encode=function(t,e){if("undefined"==typeof e&&(e=null),t instanceof Date)return t.format("Y-m-d H:i:s O");if(t instanceof s){var o="";return null!==t.attributes&&"object"==typeof t.attributes&&(o=this.encode(t.attributes),o=o.substr(1,o.length-2)),this.encode(t.value)+"("+o+")"}if(null!==t&&"object"==typeof t){var u=t instanceof r,a=t instanceof Array&&function(t){var e=0;for(var n in t)e++;return e===t.length}(t)||u&&t.isList(),h="";if(t=u?t.items():t,function(t){for(var e in t)return!1;return!0}(t))return"[]";for(var f in t){if(u)var l=t[f].key,d=t[f].value;else var l=t instanceof Array?parseInt(f):f,d=t[f];e&n.BLOCK?(d=this.encode(d,n.BLOCK),h+=(a?"-":this.encode(l)+":")+""+(-1===d.indexOf("\n")?" "+d:"\n	"+d.replace("\n","\n	"))+"\n"):h+=(a?"":this.encode(l)+": ")+""+this.encode(d)+", "}return e&n.BLOCK?h.trim()+"\n":(a?"[":"{")+""+h.substr(0,h.length-2)+(a?"]":"}")}return"string"==typeof t&&isNaN(t)&&!t.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i)&&new RegExp("^"+i.patterns[1]+"$").exec(t)?t:JSON.stringify(t)}}var s=t("./entity"),i=t("./decoder"),r=t("./map");n.BLOCK=1,e.exports=n},{"./decoder":1,"./entity":4,"./map":6}],4:[function(t,e){"use strict";e.exports=function(t,e){this.value=null,this.attributes=null,"undefined"==typeof t&&(t=null),"undefined"==typeof e&&(e=null),this.value=t,this.attributes=e}},{}],5:[function(t,e){"use strict";function n(t,e,n){this.name=this.constructor.name,this.message=t+" on line "+e+", column "+n+".",this.line=e,this.column=n,this.constructor.prototype.__proto__=Error.prototype,Error.captureStackTrace(this,this.constructor)}e.exports=n},{}],6:[function(t,e){"use strict";function n(){this._items=[],this._indexes={},this._key=0,this.length=0,this.set=function(t,e,n){if("undefined"==typeof n&&(n=!0),null===t)t=this._key++;else{var s=parseInt(1*t);!isNaN(s)&&s>=this._key&&(this._key=s+1)}return"undefined"==typeof this._indexes[t]?(this._items[this.length]={key:t,value:e},this._indexes[t]=this.length,this.length++,1):n?(this._items[this._indexes[t]].value=e,0):-1},this.add=function(t,e){return 1===this.set(t,e,!1)},this.get=function(t){if(!this.has(t))throw new Error("Item with key "+t+" not exists");return this._items[this._indexes[t]].value},this.last=function(){if(0===this.length)throw new Error("Map has no items");return this._items[this.length-1]},this.has=function(t){return"undefined"!=typeof this._indexes[t]},this.remove=function(t){if(!this.has(t))throw new Error("Item with key "+t+" not exists");delete this._items[this._indexes[t]],delete this._indexes[t],this.length--},this.items=function(){return this._items},this.keys=function(){var t=[];for(var e in this._items)t.push(this._items[e].key);return t},this.values=function(){var t=[];for(var e in this._items)t.push(this._items[e].value);return t},this.toObject=function(t){"undefined"==typeof t&&(t=!1);var e={};for(var s in this._items){var i=this._items[s].value;e[this._items[s].key]=i instanceof n&&t?i.toObject(!0):i}return e},this.forEach=function(t){for(var e in this._items)t(this._items[e].key,this._items[e].value)},this.isList=function(){return function(t){var e=0;for(var n in t){if(e!==t[n].key)return!1;e=t[n].key+1}return!0}(this.items())}}n.fromObject=function(t){var e=new n;for(var s in t)e.set(s,t[s]);return e},n.fromArray=function(t){var e=new n;for(var s in t)e.set(null,t[s]);return e},e.exports=n},{}],"neon-js":[function(t,e){"use strict";var n=t("./encoder"),s=t("./decoder"),i=function(t,e){"undefined"==typeof e&&(e=null);var s=new n;return s.encode(t,e)};e.exports.encode=i,e.exports.decode=function(t){var e=new s;return e.decode(t)},e.exports.Entity=t("./entity"),e.exports.Map=t("./map"),e.exports.CHAIN=s.CHAIN,e.exports.BLOCK=n.BLOCK,e.exports.Dumper=t("./dumper"),e.exports.Error=t("./error")},{"./decoder":1,"./dumper":2,"./encoder":3,"./entity":4,"./error":5,"./map":6}]},{},[])("neon-js")});