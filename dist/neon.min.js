/* neon-js 1.1.0 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.neon=e()}}(function(){return function e(t,n,s){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,s)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(e,t){"use strict";function n(){this.key=0,this.value=null,this.add=function(e,t){return null===this.value&&(this.value=new i),this.value.add(e,t)}}function s(e){"undefined"==typeof e&&(e=s.MAP),this.tokens=[],this.pos=0,this.input="",this.decode=function(t){if("string"!=typeof t)throw"Argument must be a string, "+typeof t+" given.";"ï»¿"==t.substr(0,3)&&(t=t.substr(3)),this.input="\n"+t.replace("\r","");var o=new RegExp("("+s.patterns.join(")|(")+")","mig");this.tokens=this.split(o,this.input);var u=this.tokens[this.tokens.length-1];this.tokens&&!o.test(u[0])&&(this.pos=this.tokens.length-1,this.error()),this.pos=0;for(var a=this.parse(null);this.tokens[this.pos];)"\n"===this.tokens[this.pos][0][0]?this.pos++:this.error();var h=function(t){if(t instanceof n)return h(t.value);if(t instanceof r)t.attributes=h(t.attributes),t.value=h(t.value);else if(t instanceof i){if(e===s.FORCE_OBJECT){var o={};return t.forEach(function(e,t){o[e]=h(t)}),o}var u=new i,a=!0,f=0;return t.forEach(function(e,t){u.set(e,h(t)),e!==f++&&(a=!1)}),e===s.MAP?u:a?u.values():u.toObject()}return t};return h(a)},this.parse=function(e,t,o,u){"undefined"==typeof o&&(o=null),"undefined"==typeof t&&(t=null),"undefined"==typeof u&&(u=!1);var a=new n;a.value=t;for(var h=e===!1,f=null,l=!1,d=this.tokens,p=d.length,c=a;this.pos<p;this.pos++){var v=d[this.pos][0];if(","===v)(u||l)&&h||this.error(),this.addValue(a,u?o:null,l?f:null),u=l=!1;else if(":"===v||"="===v)if(l&&"object"==typeof f)this.error("Unacceptable key");else if(u&&null==o&&l&&!h){this.pos++,this.addValue(a,null,this.parse(e+"  ",new i,f,!0));var y="undefined"!=typeof d[this.pos]&&"undefined"!=typeof d[this.pos+1]?d[this.pos][0].substr(1):"";if(y.length>e.length)this.pos++,this.error("Bad indentation");else if(y.length<e.length)return c;u=l=!1}else u||!l?this.error():(o=f,u=!0,l=!1,a=c);else if("-"===v)(u||l||h)&&this.error(),o=null,u=!0;else if(s.brackets[v])l?("("!==v&&this.error(),this.pos++,f instanceof r&&f.value===s.CHAIN?f.attributes.value.last().value.attributes=this.parse(!1,new i):f=new r(f,this.parse(!1,new i))):(this.pos++,f=this.parse(!1,new i)),l=!0,(void 0===d[this.pos]||d[this.pos][0]!==s.brackets[v])&&this.error();else{if("]"===v||"}"===v||")"===v){h||this.error();break}if("\n"===v[0])if(h)(u||l)&&(this.addValue(a,u?o:null,l?f:null),u=l=!1);else{for(;void 0!==d[this.pos+1]&&"\n"===d[this.pos+1][0][0];)this.pos++;if(void 0===d[this.pos+1])break;y=d[this.pos][0].substr(1),null===e&&(e=y);var g=Math.min(y.length,e.length);if(g&&y.substr(0,g)!==e.substr(0,g)&&(this.pos++,this.error("Invalid combination of tabs and spaces")),y.length>e.length)(l||!u)&&(this.pos++,this.error("Bad indentation")),this.addValue(a,o,this.parse(y,new i)),y=void 0!==d[this.pos]&&void 0!==d[this.pos+1]?d[this.pos][0].substr(1):"",y.length>e.length&&(this.pos++,this.error("Bad indentation")),u=!1;else{if(l&&!u)break;u&&(this.addValue(a,o,l?f:null),null===o||l||y!==e||"undefined"==typeof d[this.pos+1]||"-"!==d[this.pos+1][0]||(a.value.set(o,new n),a=a.value.get(o)),u=l=!1)}if(y.length<e.length)return c}else if(l)if(f instanceof r){if(f.value!==s.CHAIN){var m=new n;m.add(null,f),f=new r(s.CHAIN,m)}f.attributes.add(null,new r(v))}else this.error();else{if("undefined"==typeof this.parse.consts&&(this.parse.consts={"true":!0,True:!0,TRUE:!0,yes:!0,Yes:!0,YES:!0,on:!0,On:!0,ON:!0,"false":!1,False:!1,FALSE:!1,no:!1,No:!1,NO:!1,off:!1,Off:!1,OFF:!1,"null":0,Null:0,NULL:0}),'"'===v[0]){var x=this;f=v.substr(1,v.length-2).replace(/\\(?:u[0-9a-f]{4}|x[0-9a-f]{2}|.)/gi,function(e){var t={t:"	",n:"\n",r:"\r",f:"\f",b:"\b",'"':'"',"\\":"\\","/":"/",_:"Â "};return void 0!==t[e[1]]?t[e[1]]:"u"===e[1]&&6===e.length?String.fromCharCode(parseInt(e.substr(2),16)):"x"===e[1]&&4===e.length?String.fromCharCode(parseInt(e.substr(2),16)):void x.error("Invalid escaping sequence "+e)})}else f="'"===v[0]?v.substr(1,v.length-2):"undefined"!=typeof this.parse.consts[v]&&("undefined"==typeof d[this.pos+1]||"undefined"!=typeof d[this.pos+1]&&":"!==d[this.pos+1][0]&&"="!==d[this.pos+1][0])?0===this.parse.consts[v]?null:this.parse.consts[v]:isNaN(v)?v.match(/^\d\d\d\d-\d\d?-\d\d?(?:(?:[Tt]| +)\d\d?:\d\d:\d\d(?:\.\d*)? *(?:Z|[-+]\d\d?(?::\d\d)?)?)?$/)?new Date(v):v:1*v;l=!0}}}if(h)(u||l)&&this.addValue(a,u?o:null,l?f:null);else if(l&&!u){if(null===a.value||a.value instanceof i&&0==a.value.length)return f;this.error()}else u&&this.addValue(a,o,l?f:null);return c},this.addValue=function(e,t,n){e.add(t,n)===!1&&this.error("Duplicated key '"+t+"'")},this.error=function(e){"undefined"==typeof e&&(e="Unexpected '%s'");var t=void 0!==this.tokens[this.pos]?this.tokens[this.pos]:null,n=t?t[1]:this.input.length,s=this.input.substr(0,n),i=s.split("\n").length-1,r=n-("\n"+s).lastIndexOf("\n")+1,u=t?t[0].substr(0,40).replace("\n","<new line>"):"end";throw new o(e.replace("%s",u),i,r)},this.split=function(e,t){for(var n,s=[],i=0,r=0,o=function(e,t){e.length&&(e=[e,t],s.push(e))};n=e.exec(t);){o(t.slice(i,n.index),i),i=n.index+n[0].length;var u=Array.prototype.slice.call(n);for(r=1;r<u.length;r++)void 0!==n[r]&&o(n[r],n.index+n[0].indexOf(n[r]))}return o(t.slice(i,t.length),i),s}}var i=e("./map"),r=e("./entity"),o=e("./error");s.patterns=["'[^'\\n]*'|\"(?:\\\\.|[^\"\\\\\\n])*\"","(?:[^\\x00-\\x20#\"',:=[\\]{}()!`-]|[:-][^\"',\\]})\\s])(?:[^\\x00-\\x20,:=\\]})(]+|:(?![\\s,\\]})]|$)|[\\ \\t]+[^\\x00-\\x20#,:=\\]})(])*","[,:=[\\]{}()-]","?:\\#.*","\\n[\\t\\ ]*","?:[\\t\\ ]+"],s.brackets={"[":"]","{":"}","(":")"},s.CHAIN="!!chain",s.MAP="map",s.AUTO="auto",s.FORCE_OBJECT="object",t.exports=s},{"./entity":4,"./error":5,"./map":6}],2:[function(e,t){"use strict";function n(e){if(e instanceof Date)return"(date) "+e.toJSON();if(e instanceof i){var t="";return null!==e.attributes&&"object"==typeof e.attributes&&(t=n(e.attributes)),"(entity)\n	name: "+n(e.value)+"\n	attributes: "+(-1===t.indexOf("\n")?""+t:t.replace(/\n/g,"\n	"))}if(e instanceof s){var o="array ("+e.length+")\n";return e.forEach(function(e,t){var s=n(t);o+="	"+(n(e)+" => ")+(-1===s.indexOf("\n")?""+s:s.replace(/\n/g,"\n	"))+"\n"}),o.trim()+"\n"}return"string"==typeof e&&isNaN(e)&&!e.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i)&&new RegExp("^"+r.patterns[1]+"$").exec(e)?'"'+e+'" ('+e.length+")":JSON.stringify(e)}var s=e("./map"),i=e("./entity"),r=e("./decoder");t.exports.toText=n},{"./decoder":1,"./entity":4,"./map":6}],3:[function(e,t){"use strict";function n(){this.encode=function(e,t){if("undefined"==typeof t&&(t=null),e instanceof Date)return e.format("Y-m-d H:i:s O");if(e instanceof s){var o="";return null!==e.attributes&&"object"==typeof e.attributes&&(o=this.encode(e.attributes),o=o.substr(1,o.length-2)),this.encode(e.value)+"("+o+")"}if(null!==e&&"object"==typeof e){var u=e instanceof r,a=e instanceof Array&&function(e){var t=0;for(var n in e)t++;return t===e.length}(e)||u&&e.isList(),h="";if(e=u?e.items():e,function(e){for(var t in e)return!1;return!0}(e))return"[]";for(var f in e){if(u)var l=e[f].key,d=e[f].value;else var l=e instanceof Array?parseInt(f):f,d=e[f];t&n.BLOCK?(d=this.encode(d,n.BLOCK),h+=(a?"-":this.encode(l)+":")+""+(-1===d.indexOf("\n")?" "+d:"\n	"+d.replace("\n","\n	"))+"\n"):h+=(a?"":this.encode(l)+": ")+""+this.encode(d)+", "}return t&n.BLOCK?h.trim()+"\n":(a?"[":"{")+""+h.substr(0,h.length-2)+(a?"]":"}")}return"string"==typeof e&&isNaN(e)&&!e.match(/[\x00-\x1F]|^\d{4}|^(true|false|yes|no|on|off|null)$/i)&&new RegExp("^"+i.patterns[1]+"$").exec(e)?e:JSON.stringify(e)}}var s=e("./entity"),i=e("./decoder"),r=e("./map");n.BLOCK=1,t.exports=n},{"./decoder":1,"./entity":4,"./map":6}],4:[function(e,t){"use strict";t.exports=function(e,t){this.value=null,this.attributes=null,"undefined"==typeof e&&(e=null),"undefined"==typeof t&&(t=null),this.value=e,this.attributes=t}},{}],5:[function(e,t){"use strict";function n(e,t,n){this.name=this.constructor.name,this.message=e+" on line "+t+", column "+n+".",this.line=t,this.column=n,this.constructor.prototype.__proto__=Error.prototype,"undefined"!=typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}t.exports=n},{}],6:[function(e,t){"use strict";function n(){this._items=[],this._indexes={},this._key=0,this.length=0,this.set=function(e,t,n){if("undefined"==typeof n&&(n=!0),null===e)e=this._key++;else{var s=parseInt(1*e);!isNaN(s)&&s>=this._key&&(this._key=s+1)}return"undefined"==typeof this._indexes[e]?(this._items[this.length]={key:e,value:t},this._indexes[e]=this.length,this.length++,1):n?(this._items[this._indexes[e]].value=t,0):-1},this.add=function(e,t){return 1===this.set(e,t,!1)},this.get=function(e){if(!this.has(e))throw new Error("Item with key "+e+" not exists");return this._items[this._indexes[e]].value},this.last=function(){if(0===this.length)throw new Error("Map has no items");return this._items[this.length-1]},this.has=function(e){return"undefined"!=typeof this._indexes[e]},this.remove=function(e){if(!this.has(e))throw new Error("Item with key "+e+" not exists");delete this._items[this._indexes[e]],delete this._indexes[e],this.length--},this.items=function(){return this._items},this.keys=function(){var e=[];for(var t in this._items)e.push(this._items[t].key);return e},this.values=function(){var e=[];for(var t in this._items)e.push(this._items[t].value);return e},this.toObject=function(e){"undefined"==typeof e&&(e=!1);var t={};for(var s in this._items){var i=this._items[s].value;t[this._items[s].key]=i instanceof n&&e?i.toObject(!0):i}return t},this.forEach=function(e){for(var t in this._items)e(this._items[t].key,this._items[t].value)},this.isList=function(){return function(e){var t=0;for(var n in e){if(t!==e[n].key)return!1;t=e[n].key+1}return!0}(this.items())}}n.fromObject=function(e){var t=new n;for(var s in e)t.set(s,e[s]);return t},n.fromArray=function(e){var t=new n;for(var s in e)t.set(null,e[s]);return t},t.exports=n},{}],"neon-js":[function(e,t){"use strict";var n=e("./encoder"),s=e("./decoder"),i=function(e,t){"undefined"==typeof t&&(t=null);var s=new n;return s.encode(e,t)};t.exports.encode=i,t.exports.decode=function(e,t){"undefined"==typeof t&&(t=s.MAP);var n=new s(t);return n.decode(e)},t.exports.Entity=e("./entity"),t.exports.Map=e("./map"),t.exports.CHAIN=s.CHAIN,t.exports.OUTPUT_MAP=s.MAP,t.exports.OUTPUT_OBJECT=s.FORCE_OBJECT,t.exports.OUTPUT_AUTO=s.AUTO,t.exports.BLOCK=n.BLOCK,t.exports.Dumper=e("./dumper"),t.exports.Error=e("./error")},{"./decoder":1,"./dumper":2,"./encoder":3,"./entity":4,"./error":5,"./map":6}]},{},[])("neon-js")});